import os
import glob
import re

# your path to the reference genome
reference="/staging/leuven/stg_00079/teaching/hg19_9/chr9.fa"

# your path to the directory with samples
samples, = glob_wildcards("fastq/{sample}.fastq")

rule all:
	input:
		expand("fastq/{sample}.{extension}", sample=samples, extension=["bam"])
rule bwa_mem:
	input:
		fq="fastq/{sample}.fastq"
	output:
		bam="fastq/{sample}.bam"
	shell:
		"""
		echo "Input: {input.fq}"
		echo "Output: {output.bam}"

		# Make bam files
		bwa mem {reference} {input.fq} | samtools sort - > {output.bam}
		"""

